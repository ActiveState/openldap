[23:34] <hyc> ok, so far heap profile shows that memory use during refresh is normal
[23:35] <hyc> not wonderful, but normal. mem usage grows because we're recording the present list while receiving entries in the refresh
[23:36] <hyc> I'm seeing for 1.2GB of data about 235MB of presentlist
[23:36] <hyc> which is pretty awful, considering presentlist is just a list of UUIDs
[23:36] <hyc> being stored in an avl tree
[23:37] <hyc> a btree would have been better here, and we could just use an unsorted segmented array
[23:42] <hyc> for the accumulation phase anyway. we need to be able to lookup records during the delete pphase
[00:05] <hyc> this stuff seriously needs a rewrite
[01:13] <hyc> 2.8M records x 16 bytes per uuid so this should be no more than 48MB of overhead
[01:13] <hyc> and instead it's 3-400MB

<hyc> get lmdb incremental backup working

<hyc> I need to publish a spec for PREPARE/2-phase commit in LDAP TXNs and integrate that into lmdb and back-mdb

Leftover bits from ITS#8294 -- Drop custom SHA2 code, use default crypto library SHA2 functions instead
  May need to document minimum crypto library version requirements
  Can also include sha2.c in slapd-sha2.c and make everything static

New syslog engine

[12:45] <hyc> I meant regcomp and regexec
[12:45] <hyc> mainly - compile a pattern, then fill in substitution parameters later
[12:46] <hyc> yes but the idea is still based on numbered substitution parameters
[12:47] <hyc> it's a pretty obvious approach, and with regex, time-tested.
[12:48] <hyc> I may try to sneak it into OpenLDAP 2.5
